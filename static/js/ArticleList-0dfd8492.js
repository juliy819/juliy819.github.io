import{c as V,g as z,j as I,a as R,f as T,_ as D,b as F}from"./index-46ecffbd.js";import{_ as E}from"./Waves-1fa3c9bf.js";import{c as y}from"./index-f8537efa.js";import{M as O}from"./MyImage-d91d735e.js";import{_ as P}from"./Pagination.vue_vue_type_script_setup_true_lang-e84a943b.js";import{u as Q}from"./vue-router-2a5450bb.js";import{v as U,w as q,o as G,j as H}from"./naive-ui-b87942d2.js";import{l as J,r as _,w as K,b as W,S as m,aa as a,b0 as p,u as B,ah as t,bl as s,F as d,aP as X,R as n,aO as b,a8 as C,j as L,a9 as Y}from"./@vue-2d0ddfb4.js";import"./pinia-948ba97c.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persist-4bd0ee57.js";import"./nprogress-29a3b628.js";import"./@babel-061b4810.js";import"./@vueuse-4d6fb19c.js";import"./axios-aba6f0e0.js";import"./js-cookie-cf83ad76.js";import"./dayjs-aaaa0bae.js";import"./swiper-d1934b6f.js";import"./ssr-window-c9202916.js";import"./@kangc-6220f0f5.js";import"./vue-a1bd1397.js";import"./markdown-it-emoji-4f1b57fa.js";import"./prismjs-08ac3f6b.js";import"./v-viewer-8afc779e.js";import"./viewerjs-3fd8af48.js";import"./vueuc-27e3b830.js";import"./evtd-b614532e.js";import"./seemly-76b7b838.js";import"./@css-render-c34b42f4.js";import"./vooks-d838407f.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-0dc9900e.js";import"./treemate-25c27bff.js";import"./async-validator-dee29e8b.js";import"./date-fns-975a2d8f.js";const Z={class:"page-header"},tt={class:"page-title"},et=["src"],at={class:"bg"},ot={class:"page-container"},st={class:"article-cover"},rt={class:"article-info"},it={class:"article-title"},nt={class:"article-time"},ct={class:"tag-info"},lt={class:"article-info"},ut=J({__name:"ArticleList",setup(_t){const{appStore:w}=V(),$=z(),v=Q(),c=_(0),u=_(0),g=_(""),i=_([]),r=_({current:1,size:8,categoryId:Number(v.params.id),tagId:0});return K(()=>r.value.current,()=>{if(w.local){i.value=I(Number(v.params.id)).articleConditionList.slice((r.value.current-1)*8,r.value.current*8);return}y.getCategoryArticleList(r.value).then(({data:e})=>{i.value=e.data.articleConditionList}).catch(()=>{i.value=[]})}),W(()=>{if(w.local){const e=I(Number(v.params.id));if(e.articleConditionList.length===0){c.value=2;return}u.value=e.articleConditionList.length,i.value=e.articleConditionList.slice(0,8),g.value=e.name,c.value=1;return}y.countCategoryArticles(r.value).then(({data:e})=>{u.value=e.data}).catch(()=>{u.value=0}),y.getCategoryArticleList(r.value).then(({data:e})=>{i.value=e.data.articleConditionList,g.value=e.data.name,i.value.length>0?c.value=1:c.value=2}).catch(()=>{c.value=-1})}),(e,k)=>{const j=E,f=X("router-link"),x=D,A=U,N=q,l=G,M=H,S=R;return n(),m(d,null,[a("div",Z,[a("h1",tt,p(g.value),1),a("img",{class:"page-cover",src:B($),alt:""},null,8,et),t(j)]),a("div",at,[a("div",ot,[t(S,{status:c.value,"no-data-msg":"该分类下暂时还没有文章哦~","failed-msg":"文章列表加载失败"},{data:s(()=>[t(N,{"x-gap":"20","y-gap":"20",cols:"1 s:2 m:3 l:4",responsive:"screen"},{default:s(()=>[(n(!0),m(d,null,b(i.value,o=>(n(),C(A,{class:"article-item",key:o.id},{default:s(()=>[a("div",st,[t(f,{to:`/article/${o.id}`},{default:s(()=>[t(O,{src:o.articleCover},null,8,["src"])]),_:2},1032,["to"])]),a("div",rt,[a("div",it,[t(f,{to:`/article/${o.id}`},{default:s(()=>[L(p(o.articleTitle),1)]),_:2},1032,["to"])]),a("div",nt,[a("span",null,[t(x,{"icon-class":"calendar",size:"0.95rem"}),L(" "+p(B(T)(o.createTime)),1)])]),a("div",ct,[(n(!0),m(d,null,b(o.tagList,h=>(n(),C(f,{to:`/tag/${h.id}`,class:"article-tag-category",key:h.id},{default:s(()=>[t(x,{"icon-class":"tag",size:"0.8rem"}),L(" "+p(h.tagName),1)]),_:2},1032,["to"]))),128))])])]),_:2},1024))),128))]),_:1}),u.value>8?(n(),C(P,{key:0,current:r.value.current,"onUpdate:current":k[0]||(k[0]=o=>r.value.current=o),total:Math.ceil(u.value/8)},null,8,["current","total"])):Y("",!0)]),loading:s(()=>[t(N,{"x-gap":"20","y-gap":"20",cols:"1 s:2 m:3 l:4",responsive:"screen"},{default:s(()=>[(n(),m(d,null,b([1,2,3,4,5,6],o=>t(A,{class:"article-item",key:o},{default:s(()=>[t(l,{class:"article-cover"}),a("div",lt,[t(l,{round:"",class:"article-title",style:{width:"12rem"}}),t(l,{round:"",class:"article-time mb10",style:{width:"6rem"}}),t(M,{justify:"start"},{default:s(()=>[t(l,{round:"",style:{width:"4rem"}}),t(l,{round:"",style:{width:"4rem"}}),t(l,{round:"",style:{width:"4rem"}})]),_:1})])]),_:2},1024)),64))]),_:1})]),_:1},8,["status"])])])],64)}}});const Wt=F(ut,[["__scopeId","data-v-fbb3c5db"]]);export{Wt as default};

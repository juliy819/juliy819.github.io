import{c as M,g as S,n as T,a as V,f as R,_ as D,b as F}from"./index-46ecffbd.js";import{_ as E}from"./Waves-1fa3c9bf.js";import{t as w}from"./index-b878e130.js";import{M as O}from"./MyImage-d91d735e.js";import{_ as P}from"./Pagination.vue_vue_type_script_setup_true_lang-e84a943b.js";import{u as Q}from"./vue-router-2a5450bb.js";import{l as U,r as m,w as q,b as G,S as d,aa as s,b0 as _,u as B,ah as t,bl as o,F as g,aP as H,R as n,aO as C,a8 as b,j as v,a9 as J}from"./@vue-2d0ddfb4.js";import{j as K,v as W,w as X,o as Y}from"./naive-ui-b87942d2.js";import"./pinia-948ba97c.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persist-4bd0ee57.js";import"./nprogress-29a3b628.js";import"./@babel-061b4810.js";import"./@vueuse-4d6fb19c.js";import"./axios-aba6f0e0.js";import"./js-cookie-cf83ad76.js";import"./dayjs-aaaa0bae.js";import"./swiper-d1934b6f.js";import"./ssr-window-c9202916.js";import"./@kangc-6220f0f5.js";import"./vue-a1bd1397.js";import"./markdown-it-emoji-4f1b57fa.js";import"./prismjs-08ac3f6b.js";import"./v-viewer-8afc779e.js";import"./viewerjs-3fd8af48.js";import"./vueuc-27e3b830.js";import"./evtd-b614532e.js";import"./seemly-76b7b838.js";import"./@css-render-c34b42f4.js";import"./vooks-d838407f.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-0dc9900e.js";import"./treemate-25c27bff.js";import"./async-validator-dee29e8b.js";import"./date-fns-975a2d8f.js";const Z={class:"page-header"},tt={class:"page-title"},et=["src"],at={class:"bg"},ot={class:"page-container"},st={class:"article-cover"},rt={class:"article-info"},it={class:"article-title"},nt={class:"tag-info"},ct={class:"article-info"},lt=U({__name:"ArticleList",setup(ut){const{appStore:k}=M(),$=S(),f=Q(),c=m(0),u=m(0),h=m("标签"),i=m([]),r=m({current:1,size:8,categoryId:0,tagId:Number(f.params.id)});return q(()=>r.value.current,()=>{if(k.local){i.value=T(Number(f.params.id)).articleConditionList.slice((r.value.current-1)*8,r.value.current*8);return}w.getTagArticleList(r.value).then(({data:a})=>{i.value=a.data.articleConditionList}).catch(()=>{i.value=[]})}),G(()=>{if(k.local){const a=T(Number(f.params.id));if(a.articleConditionList.length===0){c.value=2;return}u.value=a.articleConditionList.length,i.value=a.articleConditionList.slice(0,8),h.value=a.name,c.value=1;return}w.countTagArticles(r.value).then(({data:a})=>{u.value=a.data}).catch(()=>{u.value=0}),w.getTagArticleList(r.value).then(({data:a})=>{i.value=a.data.articleConditionList,h.value=a.data.name,i.value.length>0?c.value=1:c.value=2}).catch(()=>{c.value=-1})}),(a,N)=>{const j=E,p=H("router-link"),y=D,x=K,A=W,I=X,l=Y,z=V;return n(),d(g,null,[s("div",Z,[s("h1",tt,_(h.value),1),s("img",{class:"page-cover",src:B($),alt:""},null,8,et),t(j)]),s("div",at,[s("div",ot,[t(z,{status:c.value,"no-data-msg":"该标签下暂时还没有文章哦~","failed-msg":"文章列表加载失败"},{data:o(()=>[t(I,{"x-gap":"20","y-gap":"20",cols:"1 s:2 m:3 l:4",responsive:"screen"},{default:o(()=>[(n(!0),d(g,null,C(i.value,e=>(n(),b(A,{class:"article-item",key:e.id},{default:o(()=>[s("div",st,[t(p,{to:`/article/${e.id}`},{default:o(()=>[t(O,{src:e.articleCover},null,8,["src"])]),_:2},1032,["to"])]),s("div",rt,[s("div",it,[t(p,{to:`/article/${e.id}`},{default:o(()=>[v(_(e.articleTitle),1)]),_:2},1032,["to"])]),t(x,{justify:"space-between",class:"article-meta"},{default:o(()=>[s("span",null,[t(y,{"icon-class":"calendar",size:"0.95rem"}),v(" "+_(B(R)(e.createTime)),1)]),t(p,{to:`/category/${e.category.id}`},{default:o(()=>[t(y,{"icon-class":"flag",size:"0.9rem"}),v(" "+_(e.category.categoryName),1)]),_:2},1032,["to"])]),_:2},1024),s("div",nt,[(n(!0),d(g,null,C(e.tagList,L=>(n(),b(p,{to:`/tag/${L.id}`,class:"article-tag-category",key:L.id},{default:o(()=>[t(y,{"icon-class":"tag",size:"0.8rem"}),v(" "+_(L.tagName),1)]),_:2},1032,["to"]))),128))])])]),_:2},1024))),128))]),_:1}),u.value>8?(n(),b(P,{key:0,current:r.value.current,"onUpdate:current":N[0]||(N[0]=e=>r.value.current=e),total:Math.ceil(u.value/8)},null,8,["current","total"])):J("",!0)]),loading:o(()=>[t(I,{"x-gap":"20","y-gap":"20",cols:"1 s:2 m:3 l:4",responsive:"screen"},{default:o(()=>[(n(),d(g,null,C([1,2,3,4,5,6],e=>t(A,{class:"article-item",key:e},{default:o(()=>[t(l,{class:"article-cover"}),s("div",ct,[t(l,{round:"",class:"article-title",style:{width:"12rem"}}),t(l,{round:"",class:"article-meta mb10",style:{width:"6rem"}}),t(x,{justify:"start"},{default:o(()=>[t(l,{round:"",style:{width:"4rem"}}),t(l,{round:"",style:{width:"4rem"}}),t(l,{round:"",style:{width:"4rem"}})]),_:1})])]),_:2},1024)),64))]),_:1})]),_:1},8,["status"])])])],64)}}});const Kt=F(lt,[["__scopeId","data-v-d3ddcaf7"]]);export{Kt as default};
